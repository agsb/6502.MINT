# 6502.MINT

A still raw [Mint](https://github.com/monsonite/MINT) for 6502.

## _this still a stub_

## Parameters

    
## Run Time

      a Z80, does ADD HL, DE in 12 t and 1 byte  
      a 6502, does it in 13 t and 9 bytes 
      
## Notes

### Code Design

   - this code is for ROM use. 
 
   - if change for RAM:
       caller must save a, x, y and 
       reserve at least 16 words at hardware stack 

   - a 6502 is a 8-bit CPU doing 16-bit things
   - a cell is 16-bit 
   - no multiuser, no multitask 
   - no garbage collector
  - no flash or flush to eeproms :)
  - Stacks are round-robin using absolute address and word offsets in X and Y
   - stacks are offsets from absolute address, grows backward
   - data stack indexed by X and return stack indexed by Y 
   - terminal input buffer and stacks are all just 128 cells deep 
   - jump table is 16-bits
   - extense use of Y indexed indirect addressing 
   - uses 16 bytes at page zero $F0 to $FF, 
   - user functions are stored in heap
   - all rotines must end with: 
   	jmp next_ or jmp (vNext) or jmp drop_ 
   - all stack routines, load the index at start, save the index at end, if changed
      this leaves free both X and Y for general use.
   - better safe than sorry, tweak if need speed 
   - all macros, inputs and outputs are limited 
	to 255 bytes

### MINT Changes

  - depends on UART for, _hitc_, check if a key pressed, _getc_, wait and receive a byte, _putc_, wait and transmit a byte
 
 1. expanded mint variables
        alt-a, used for vS0, start of data stack 
        alt-f, used for vR0, start of return stack  
        alt-g, used for vNext, indirect dispatcher  
        alt-r, return the return stack pointer
        alt-s, return the data stack pointer

   2. expanded mint functions
        alt-U, classic Forth R> 
        alt-V, classic Forth >R 
        alt-H, verify if a key was hit 

   3. all variables and user macros are composed in groups,
        each group have 32 cells, accessed from 'a' to 'z',
        with 6 more cells below 'z'.
   
   4. user macros extended for 5 groups  

   4. extra string functions, both ends at crlf or asciiz
       gets\_, gets a line into a buffer, 
       puts\_, puts a line from a buffer,  


